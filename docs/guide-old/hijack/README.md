# 防止劫持

这里说的劫持主要是运营商劫持，出现的情况有这样二种：
1. 请求结果返回后运营商插入恶意代码。
2. 响应头`status`字段返回`40* 50*`系列状态时遭运营商重定向。

这种情况下导致最终的请求结果与我们实际想要的结果有差异，解决办法也有二种：
1. 全站启用 HTTPS 安全协议。
2. 使用 HTTPDNS，例如阿里云的 https://www.aliyun.com/product/httpdns

框架对运营商劫持也做了初步防范，在`application\api\exception`目录下的`ApiOutput.php`是请求结果返回出口。
每次数据出口前会对当前的系统环境进行检测，如果是在 HTTPS 状态下响应头`status`字段返回真实状态，否则始终返回 200 状态，而请求结果中的`status`字段始终会是真实状态。